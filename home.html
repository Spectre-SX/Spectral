<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Spectral</title>

  <!-- ✨ particles.js -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

  <!-- Firebase SDKs -->
  <script type="module">
    // 🌟 Import Firebase SDKs
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getDatabase, ref, get, set, update, increment } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-database.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics.js";

    // 🔥 Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyDG05fTrg2hGGWhPYVuTI893-SdCs-BIy8",
      authDomain: "spectral-8f198.firebaseapp.com",
      databaseURL: "https://spectral-8f198-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "spectral-8f198",
      storageBucket: "spectral-8f198.appspot.com",
      messagingSenderId: "381743131820",
      appId: "1:381743131820:web:f827060f039d1371438309",
      measurementId: "G-4NFX3V1MTH"
    };

    // 🚀 Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const analytics = getAnalytics(app);

    // 👥 Visitor Counter Logic
    const counterRef = ref(database, 'visitorCounter');

    // Update visitor count 🔥
    get(counterRef)
      .then((snapshot) => {
        if (snapshot.exists()) {
          // if counter exists ➡️ increment it
          update(counterRef, {
            count: increment(1)
          });
        } else {
          // if counter DOESN'T exist ➡️ set it to 1
          set(counterRef, {
            count: 1
          });
        }
      })
      .catch((error) => {
        console.error("Error reading counter:", error);
      });

    // Listen for changes and update the counter live 🚀
    import { onValue } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-database.js";
    onValue(counterRef, (snapshot) => {
      const data = snapshot.val();
      document.getElementById('visitor-counter').innerText = `👥 Visitors: ${data.count}`;
    });

  </script>

  <style>
    /* (your full CSS stays the same, skipping here to save scrolling) */
  </style>
</head>

<body>

<!-- 🌌 Particle Background -->
<div id="particles-js"></div>

<!-- 🧭 Navbar -->
<nav>
  <!-- (your navbar code) -->
</nav>

<!-- 🎶 Music -->
<audio autoplay loop>
  <source src="https://github.com/Spectre-SX/Spectral/raw/refs/heads/files/Space%20Jazz.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio>

<!-- 🦾 Hero Section -->
<section class="hero">
  <h1>Spectral</h1>
  <p>Experience the best website possible.</p>
</section>

<!-- 📦 Features & Updates -->
<section class="container" id="content-container">
  <!-- (your features and updates code) -->
</section>

<!-- 👥 Visitor Counter -->
<div id="visitor-counter">
  Visitors: Loading...
</div>

<!-- 💫 Particle Config and Scripts -->
<script>
  // 🌌 Particle Background Setup
  particlesJS("particles-js", {
    "particles": {
      "number": { "value": 90, "density": { "enable": true, "value_area": 800 } },
      "color": { "value": "#ffffff" },
      "shape": { "type": "circle", "stroke": { "width": 0, "color": "#000000" } },
      "opacity": { "value": 0.2, "random": true },
      "size": { "value": 2.5, "random": true },
      "line_linked": {
        "enable": true,
        "distance": 130,
        "color": "#ffffff",
        "opacity": 0.2,
        "width": 1
      },
      "move": {
        "enable": true,
        "speed": 1.6,
        "out_mode": "bounce"
      }
    },
    "interactivity": {
      "detect_on": "canvas",
      "events": {
        "onhover": { "enable": true, "mode": "grab" },
        "onclick": { "enable": true, "mode": "push" }
      },
      "modes": {
        "grab": { "distance": 140, "line_linked": { "opacity": 0.3 } },
        "push": { "particles_nb": 4 }
      }
    },
    "retina_detect": true
  });

  // ✨ Fade In Page
  window.addEventListener('load', () => {
    document.body.classList.add('loaded');
  });
</script>

</body>
</html>
